var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};
var SharingController=function(a){this._flowcellId=a;this._username=document.querySelector("#id_username");this._permission=document.querySelector("#id_permission");this._messageView=new MessageView(document.querySelector("#sharing-messages"));this._dataTable=$("#sharing_table").DataTable({data:[],columns:[{data:"username"},{data:"permission"},{data:"user"}],columnDefs:[{targets:2,data:2,render:function(b,d,c,e){return'<span href="#" onclick="mSharingController.delete(\''+c.permission_code+"', "+
c.user+", "+c.flowcell+')">DELETE</span>'}}]});this.getAll()};
SharingController.prototype.create=function(a){a.preventDefault();var b=this;axios.create({headers:{"X-CSRFToken":getCookie("csrftoken")}}).post("/api/v1/flowcells/"+this._flowcellId+"/sharing/",{flowcell:this._flowcellId,permission:this._permission.value,username:this._username.value}).then(function(d){b.getAll();b._messageView.update("New permission successfully created!")})["catch"](function(d){b._messageView.update("Something went wrong! Please check the following message: "+d.response.data.message)})};
SharingController.prototype["delete"]=function(a,b,d){d=getCookie("csrftoken");var c=this;axios.create({headers:{"X-CSRFToken":d}}).post("/api/v1/flowcells/"+this._flowcellId+"/sharing/delete/",{user_id:b,permission:a}).then(function(e){c.getAll();c._messageView.update("Permission deleted!")})["catch"](function(e){c._messageView.update("Something went wrong! Please check the following message: "+e.response.data.message)})};
SharingController.prototype.getAll=function(){var a=this;axios.get("/api/v1/flowcells/"+this._flowcellId+"/sharing/").then(function(b){a._dataTable.clear().rows.add(b.data).draw()})["catch"](function(b){console.log(b)})};