{% load static %}
<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html>
{% include 'minoTourTemplates/mT_header.html' %}
<!--
BODY TAG OPTIONS:
=================
Apply one or more of the following classes to get the
desired effect
|---------------------------------------------------------|
| SKINS         | skin-blue                               |
|               | skin-black                              |
|               | skin-purple                             |
|               | skin-yellow                             |
|               | skin-red                                |
|               | skin-green                              |
|---------------------------------------------------------|
|LAYOUT OPTIONS | fixed                                   |
|               | layout-boxed                            |
|               | layout-top-nav                          |
|               | sidebar-collapse                        |
|               | sidebar-mini                            |
|---------------------------------------------------------|
-->
<body class="hold-transition skin-blue sidebar-mini">
<div class="wrapper">

  {%  include 'minoTourTemplates/mT_main_header.html' %}
  {%  include 'minoTourTemplates/mT_left_nav.html' %}

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <h1>
        Current Runs
        <small>Optional description</small>
      </h1>

      <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Level</a></li>
        <li class="active">Here</li>
      </ol>
    </section>

    <!-- Main content -->
    <section class="content">
    {{ request.user }}


        <div id="container" style="width:100%; height:400px;">Does this get rendered</div>



      <!-- Your Page Content Here -->

    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->

  {% include 'minoTourTemplates/mT_footer.html' %}

  {% include 'minoTourTemplates/mT_sidebar.html' %}
    {%  include 'minoTourTemplates/mT_javascript.html' %}

    <script>
        $.getJSON('http://localhost:8100/api/v1/runs/23/yield/', function (csv) {
            console.log(csv['0']['data']);
        Highcharts.chart('container', {
        chart: {
            type: 'spline',
            animation: Highcharts.svg, // don't animate in old IE
            marginRight: 10,

        },
        title: {
            text: 'Cumulative Yield'
        },
        xAxis: {
            title: {
                text: 'Time and Date'
            },
            type: 'datetime',
            tickPixelInterval: 150
        },
        yAxis: {
            title: {
                text: 'Yield (bases)'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        tooltip: {
            formatter: function () {
                return '<b>' + this.series.name + '</b><br/>' + 'Timepoint:' +
                    Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) + '<br/>' +
                    Highcharts.numberFormat(this.y, 2) + ' bases';
            }
        },
        legend: {
            enabled: false
        },
        exporting: {
            enabled: false
        },
        series:[{
            name: csv[0]['name'],
            data: csv[0]['data']
        }]
    });
});
</script>
</body>
</html>